{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? t(exports) : \"function\" == typeof define && define.amd ? define([\"exports\"], t) : t(e[\"leaflet-simple-map-screenshoter\"] = e[\"leaflet-simple-map-screenshoter\"] || {});\n}(this, function (e) {\n  \"use strict\";\n\n  var t = \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {};\n  function n(e, t) {\n    return e(t = {\n      exports: {}\n    }, t.exports), t.exports;\n  }\n  var o = n(function (e, n) {\n      !function (t) {\n        const n = {\n          escape: function (e) {\n            return e.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n          },\n          parseExtension: o,\n          mimeType: function (e) {\n            return e = o(e).toLowerCase(), function () {\n              var e = \"application/font-woff\",\n                t = \"image/jpeg\";\n              return {\n                woff: e,\n                woff2: e,\n                ttf: \"application/font-truetype\",\n                eot: \"application/vnd.ms-fontobject\",\n                png: \"image/png\",\n                jpg: t,\n                jpeg: t,\n                gif: \"image/gif\",\n                tiff: \"image/tiff\",\n                svg: \"image/svg+xml\"\n              };\n            }()[e] || \"\";\n          },\n          dataAsUrl: function (e, t) {\n            return `data:${t};base64,` + e;\n          },\n          isDataUrl: function (e) {\n            return -1 !== e.search(/^(data:)/);\n          },\n          canvasToBlob: function (e) {\n            return e.toBlob ? new Promise(function (t) {\n              e.toBlob(t);\n            }) : (t = e, new Promise(function (e) {\n              const n = d(t.toDataURL().split(\",\")[1]);\n              var o = n.length;\n              const r = new Uint8Array(o);\n              for (let e = 0; e < o; e++) r[e] = n.charCodeAt(e);\n              e(new Blob([r], {\n                type: \"image/png\"\n              }));\n            }));\n            var t;\n          },\n          resolveUrl: function (e, t) {\n            const n = document.implementation.createHTMLDocument(),\n              o = n.createElement(\"base\"),\n              r = (n.head.appendChild(o), n.createElement(\"a\"));\n            return n.body.appendChild(r), o.href = t, r.href = e, r.href;\n          },\n          getAndEncode: function (e) {\n            let t = h.impl.urlCache.find(function (t) {\n              return t.url === e;\n            });\n            return t || (t = {\n              url: e,\n              promise: null\n            }, h.impl.urlCache.push(t)), null === t.promise && (h.impl.options.cacheBust && (e += (/\\?/.test(e) ? \"&\" : \"?\") + new Date().getTime()), t.promise = new Promise(function (t) {\n              const n = h.impl.options.httpTimeout,\n                o = new XMLHttpRequest();\n              let r;\n              var i;\n              function a(e) {\n                console.error(e), t(\"\");\n              }\n              o.onreadystatechange = function () {\n                if (4 === o.readyState) if (200 !== o.status) r ? t(r) : a(`cannot fetch resource: ${e}, status: ` + o.status);else {\n                  const e = new FileReader();\n                  e.onloadend = function () {\n                    var n = e.result.split(/,/)[1];\n                    t(n);\n                  }, e.readAsDataURL(o.response);\n                }\n              }, o.ontimeout = function () {\n                r ? t(r) : a(`timeout of ${n}ms occured while fetching resource: ` + e);\n              }, o.responseType = \"blob\", o.timeout = n, h.impl.options.useCredentials && (o.withCredentials = !0), o.open(\"GET\", e, !0), o.send(), h.impl.options.imagePlaceholder && (i = h.impl.options.imagePlaceholder.split(/,/)) && i[1] && (r = i[1]);\n            })), t.promise;\n          },\n          uid: function () {\n            let e = 0;\n            return function () {\n              return \"u\" + (\"0000\" + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4) + e++;\n            };\n          }(),\n          delay: function (e) {\n            return function (t) {\n              return new Promise(function (n) {\n                setTimeout(function () {\n                  n(t);\n                }, e);\n              });\n            };\n          },\n          asArray: function (e) {\n            const t = [],\n              n = e.length;\n            for (let o = 0; o < n; o++) t.push(e[o]);\n            return t;\n          },\n          escapeXhtml: function (e) {\n            return e.replace(/%/g, \"%25\").replace(/#/g, \"%23\").replace(/\\n/g, \"%0A\");\n          },\n          makeImage: function (e) {\n            return \"data:,\" !== e ? new Promise(function (t, n) {\n              const o = new Image();\n              h.impl.options.useCredentials && (o.crossOrigin = \"use-credentials\"), o.onload = function () {\n                t(o);\n              }, o.onerror = n, o.src = e;\n            }) : Promise.resolve();\n          },\n          width: function (e) {\n            var t = r(e, \"border-left-width\"),\n              n = r(e, \"border-right-width\");\n            return e.scrollWidth + t + n;\n          },\n          height: function (e) {\n            var t = r(e, \"border-top-width\"),\n              n = r(e, \"border-bottom-width\");\n            return e.scrollHeight + t + n;\n          }\n        };\n        function o(e) {\n          return (e = /\\.([^\\.\\/]*?)(\\?|$)/g.exec(e)) ? e[1] : \"\";\n        }\n        function r(e, t) {\n          const n = f(e).getPropertyValue(t);\n          return parseFloat(n.replace(\"px\", \"\"));\n        }\n        const i = function () {\n            const e = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n            return {\n              inlineAll: function (e, n, i) {\n                return t(e) ? Promise.resolve(e).then(o).then(function (t) {\n                  let o = Promise.resolve(e);\n                  return t.forEach(function (e) {\n                    o = o.then(function (t) {\n                      return r(t, e, n, i);\n                    });\n                  }), o;\n                }) : Promise.resolve(e);\n              },\n              shouldProcess: t,\n              impl: {\n                readUrls: o,\n                inline: r\n              }\n            };\n            function t(t) {\n              return -1 !== t.search(e);\n            }\n            function o(t) {\n              const o = [];\n              for (var r; null !== (r = e.exec(t));) o.push(r[1]);\n              return o.filter(function (e) {\n                return !n.isDataUrl(e);\n              });\n            }\n            function r(e, t, o, r) {\n              return Promise.resolve(t).then(function (e) {\n                return o ? n.resolveUrl(e, o) : e;\n              }).then(r || n.getAndEncode).then(function (e) {\n                return n.dataAsUrl(e, n.mimeType(t));\n              }).then(function (o) {\n                return e.replace((r = t, new RegExp(`(url\\\\(['\"]?)(${n.escape(r)})(['\"]?\\\\))`, \"g\")), `$1${o}$3`);\n                var r;\n              });\n            }\n          }(),\n          a = {\n            resolveAll: function () {\n              return s().then(function (e) {\n                return Promise.all(e.map(function (e) {\n                  return e.resolve();\n                }));\n              }).then(function (e) {\n                return e.join(\"\\n\");\n              });\n            },\n            impl: {\n              readAll: s\n            }\n          };\n        function s() {\n          return Promise.resolve(n.asArray(document.styleSheets)).then(function (e) {\n            const t = [];\n            return e.forEach(function (e) {\n              if (Object.getPrototypeOf(e).hasOwnProperty(\"cssRules\")) try {\n                n.asArray(e.cssRules || []).forEach(t.push.bind(t));\n              } catch (t) {\n                console.log(\"Error while reading CSS rules from \" + e.href, t.toString());\n              }\n            }), t;\n          }).then(function (e) {\n            return e.filter(function (e) {\n              return e.type === CSSRule.FONT_FACE_RULE;\n            }).filter(function (e) {\n              return i.shouldProcess(e.style.getPropertyValue(\"src\"));\n            });\n          }).then(function (t) {\n            return t.map(e);\n          });\n          function e(e) {\n            return {\n              resolve: function () {\n                var t = (e.parentStyleSheet || {}).href;\n                return i.inlineAll(e.cssText, t);\n              },\n              src: function () {\n                return e.style.getPropertyValue(\"src\");\n              }\n            };\n          }\n        }\n        const c = {\n          inlineAll: function e(t) {\n            return t instanceof Element ? function (e) {\n              const t = e.style.getPropertyValue(\"background\");\n              return t ? i.inlineAll(t).then(function (n) {\n                e.style.setProperty(\"background\", n, t);\n              }).then(function () {\n                return e;\n              }) : Promise.resolve(e);\n            }(t).then(function () {\n              return t instanceof HTMLImageElement ? l(t).inline() : Promise.all(n.asArray(t.childNodes).map(function (t) {\n                return e(t);\n              }));\n            }) : Promise.resolve(t);\n          },\n          impl: {\n            newImage: l\n          }\n        };\n        function l(e) {\n          return {\n            inline: function (t) {\n              return n.isDataUrl(e.src) ? Promise.resolve() : Promise.resolve(e.src).then(t || n.getAndEncode).then(function (t) {\n                return n.dataAsUrl(t, n.mimeType(e.src));\n              }).then(function (t) {\n                return new Promise(function (n) {\n                  e.onload = n, e.onerror = n, e.src = t;\n                });\n              });\n            }\n          };\n        }\n        const u = {\n            imagePlaceholder: void 0,\n            cacheBust: !1,\n            useCredentials: !1,\n            httpTimeout: 3e4\n          },\n          h = {\n            toSvg: p,\n            toPng: function (e, t) {\n              return (t = t || {}).raster = !0, m(e, t).then(function (e) {\n                return e.toDataURL();\n              });\n            },\n            toJpeg: function (e, t) {\n              return (t = t || {}).raster = !0, m(e, t).then(function (e) {\n                return e.toDataURL(\"image/jpeg\", t.quality || 1);\n              });\n            },\n            toBlob: function (e, t) {\n              return (t = t || {}).raster = !0, m(e, t).then(n.canvasToBlob);\n            },\n            toPixelData: function (e, t) {\n              return (t = t || {}).raster = !0, m(e, t).then(function (t) {\n                return t.getContext(\"2d\").getImageData(0, 0, n.width(e), n.height(e)).data;\n              });\n            },\n            toCanvas: function (e, t) {\n              return (t = t || {}).raster = !0, m(e, t || {});\n            },\n            impl: {\n              fontFaces: a,\n              images: c,\n              util: n,\n              inliner: i,\n              urlCache: [],\n              options: {}\n            }\n          },\n          f = (e.exports = h, t.getComputedStyle || window.getComputedStyle),\n          d = t.atob || window.atob;\n        function p(e, t) {\n          var o = t = t || {};\n          return void 0 === o.imagePlaceholder ? h.impl.options.imagePlaceholder = u.imagePlaceholder : h.impl.options.imagePlaceholder = o.imagePlaceholder, void 0 === o.cacheBust ? h.impl.options.cacheBust = u.cacheBust : h.impl.options.cacheBust = o.cacheBust, void 0 === o.useCredentials ? h.impl.options.useCredentials = u.useCredentials : h.impl.options.useCredentials = o.useCredentials, Promise.resolve(e).then(function (e) {\n            return function e(t, o, r, i, a = null) {\n              return r || !o || o(t) ? Promise.resolve(t).then(function (e) {\n                return e instanceof HTMLCanvasElement ? n.makeImage(e.toDataURL()) : \"IFRAME\" === e.nodeName ? html2canvas(e.contentDocument.body).then(e => e.toDataURL()).then(n.makeImage) : e.cloneNode(!1);\n              }).then(function (r) {\n                return function (t, r) {\n                  const a = t.childNodes;\n                  return 0 === a.length ? Promise.resolve(r) : function (n, r) {\n                    const a = f(t);\n                    let s = Promise.resolve();\n                    return r.forEach(function (t) {\n                      s = s.then(function () {\n                        return e(t, o, !1, i, a);\n                      }).then(function (e) {\n                        e && n.appendChild(e);\n                      });\n                    }), s;\n                  }(r, n.asArray(a)).then(function () {\n                    return r;\n                  });\n                }(t, r);\n              }).then(function (e) {\n                return function (e, t, o) {\n                  return t instanceof Element ? Promise.resolve().then(function () {\n                    !function (e, t) {\n                      const i = f(e);\n                      i.cssText ? (t.style.cssText = i.cssText, function (e, t) {\n                        t.font = e.font, t.fontFamily = e.fontFamily, t.fontFeatureSettings = e.fontFeatureSettings, t.fontKerning = e.fontKerning, t.fontSize = e.fontSize, t.fontStretch = e.fontStretch, t.fontStyle = e.fontStyle, t.fontVariant = e.fontVariant, t.fontVariantCaps = e.fontVariantCaps, t.fontVariantEastAsian = e.fontVariantEastAsian, t.fontVariantLigatures = e.fontVariantLigatures, t.fontVariantNumeric = e.fontVariantNumeric, t.fontVariationSettings = e.fontVariationSettings, t.fontWeight = e.fontWeight;\n                      }(i, t.style)) : (o ? function (e, t, n, o) {\n                        const r = n.style,\n                          i = e.style;\n                        for (var a of t) {\n                          var s = t.getPropertyValue(a),\n                            c = i.getPropertyValue(a),\n                            l = (i.setProperty(a, o ? \"initial\" : \"unset\"), t.getPropertyValue(a));\n                          l !== s ? r.setProperty(a, s) : r.removeProperty(a), i.setProperty(a, c);\n                        }\n                      }(e, i, t, r) : function (e, t, o) {\n                        const r = function (e) {\n                            if (v[e]) return v[e];\n                            y || ((y = document.createElement(\"iframe\")).style.visibility = \"hidden\", y.style.position = \"fixed\", document.body.appendChild(y), y.contentWindow.document.write('<!DOCTYPE html><meta charset=\"UTF-8\"><title>sandbox</title><body>'));\n                            const t = document.createElement(e),\n                              o = (y.contentWindow.document.body.appendChild(t), t.textContent = \".\", y.contentWindow.getComputedStyle(t)),\n                              r = {};\n                            return n.asArray(o).forEach(function (e) {\n                              r[e] = \"width\" === e || \"height\" === e ? \"auto\" : o.getPropertyValue(e);\n                            }), y.contentWindow.document.body.removeChild(t), v[e] = r;\n                          }(o.tagName),\n                          i = o.style;\n                        n.asArray(e).forEach(function (n) {\n                          var o = e.getPropertyValue(n);\n                          (o !== r[n] || t && o !== t.getPropertyValue(n)) && i.setProperty(n, o, e.getPropertyPriority(n));\n                        });\n                      }(i, a, t), r && ([\"inset-block\", \"inset-block-start\", \"inset-block-end\"].forEach(e => t.style.removeProperty(e)), [\"left\", \"right\", \"top\", \"bottom\"].forEach(e => {\n                        t.style.getPropertyValue(e) && t.style.setProperty(e, \"0px\");\n                      })));\n                    }(e, t);\n                  }).then(function () {\n                    [\":before\", \":after\"].forEach(function (o) {\n                      !function (o) {\n                        const r = f(e, o),\n                          i = r.getPropertyValue(\"content\");\n                        if (\"\" !== i && \"none\" !== i) {\n                          const e = n.uid(),\n                            i = t.getAttribute(\"class\"),\n                            a = (i && t.setAttribute(\"class\", i + \" \" + e), document.createElement(\"style\"));\n                          a.appendChild(function () {\n                            const t = `.${e}:` + o,\n                              i = (r.cssText ? function () {\n                                return `${r.cssText} content: ${r.getPropertyValue(\"content\")};`;\n                              } : function () {\n                                return n.asArray(r).map(function (e) {\n                                  return e + \": \" + r.getPropertyValue(e) + (r.getPropertyPriority(e) ? \" !important\" : \"\");\n                                }).join(\"; \") + \";\";\n                              })();\n                            return document.createTextNode(t + `{${i}}`);\n                          }()), t.appendChild(a);\n                        }\n                      }(o);\n                    });\n                  }).then(function () {\n                    e instanceof HTMLTextAreaElement && (t.innerHTML = e.value), e instanceof HTMLInputElement && t.setAttribute(\"value\", e.value);\n                  }).then(function () {\n                    t instanceof SVGElement && (t.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\"), t instanceof SVGRectElement && [\"width\", \"height\"].forEach(function (e) {\n                      const n = t.getAttribute(e);\n                      n && t.style.setProperty(e, n);\n                    }));\n                  }).then(function () {\n                    return t;\n                  }) : t;\n                }(t, e, i);\n              }) : Promise.resolve();\n            }(e, t.filter, !0, !t.raster);\n          }).then(g).then(w).then(function (e) {\n            t.bgcolor && (e.style.backgroundColor = t.bgcolor), t.width && (e.style.width = t.width + \"px\"), t.height && (e.style.height = t.height + \"px\"), t.style && Object.keys(t.style).forEach(function (n) {\n              e.style[n] = t.style[n];\n            });\n            let n = null;\n            return \"function\" == typeof t.onclone && (n = t.onclone(e)), Promise.resolve(n).then(function () {\n              return e;\n            });\n          }).then(function (o) {\n            return o = o, r = t.width || n.width(e), i = t.height || n.height(e), Promise.resolve(o).then(function (e) {\n              return e.setAttribute(\"xmlns\", \"http://www.w3.org/1999/xhtml\"), new XMLSerializer().serializeToString(e);\n            }).then(n.escapeXhtml).then(function (e) {\n              return `<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">${e}</foreignObject>`;\n            }).then(function (e) {\n              return `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${r}\" height=\"${i}\">${e}</svg>`;\n            }).then(function (e) {\n              return \"data:image/svg+xml;charset=utf-8,\" + e;\n            });\n            var r, i;\n          }).then(function (e) {\n            return h.impl.urlCache = [], e;\n          });\n        }\n        function m(e, t) {\n          return p(e, t).then(n.makeImage).then(n.delay(0)).then(function (o) {\n            var r = \"number\" != typeof t.scale ? 1 : t.scale;\n            const i = function (e, o) {\n                const r = document.createElement(\"canvas\");\n                if (r.width = (t.width || n.width(e)) * o, r.height = (t.height || n.height(e)) * o, t.bgcolor) {\n                  const e = r.getContext(\"2d\");\n                  e.fillStyle = t.bgcolor, e.fillRect(0, 0, r.width, r.height);\n                }\n                return r;\n              }(e, r),\n              a = i.getContext(\"2d\");\n            return a.mozImageSmoothingEnabled = !1, a.msImageSmoothingEnabled = !1, a.imageSmoothingEnabled = !1, o && (a.scale(r, r), a.drawImage(o, 0, 0)), y && (document.body.removeChild(y), y = null, M && clearTimeout(M), M = setTimeout(() => {\n              M = null, v = {};\n            }, 2e4)), i;\n          });\n        }\n        function g(e) {\n          return a.resolveAll().then(function (t) {\n            const n = document.createElement(\"style\");\n            return e.appendChild(n), n.appendChild(document.createTextNode(t)), e;\n          });\n        }\n        function w(e) {\n          return c.inlineAll(e).then(function () {\n            return e;\n          });\n        }\n        let M = null,\n          y = null,\n          v = {};\n      }(t);\n    }),\n    r = n(function (e, n) {\n      (function () {\n        function n(e, t, n) {\n          var o = new XMLHttpRequest();\n          o.open(\"GET\", e), o.responseType = \"blob\", o.onload = function () {\n            a(o.response, t, n);\n          }, o.onerror = function () {\n            console.error(\"could not download file\");\n          }, o.send();\n        }\n        function o(e) {\n          var t = new XMLHttpRequest();\n          t.open(\"HEAD\", e, !1);\n          try {\n            t.send();\n          } catch (e) {}\n          return 200 <= t.status && 299 >= t.status;\n        }\n        function r(e) {\n          try {\n            e.dispatchEvent(new MouseEvent(\"click\"));\n          } catch (n) {\n            var t = document.createEvent(\"MouseEvents\");\n            t.initMouseEvent(\"click\", !0, !0, window, 0, 0, 0, 80, 20, !1, !1, !1, !1, 0, null), e.dispatchEvent(t);\n          }\n        }\n        var i = \"object\" == typeof window && window.window === window ? window : \"object\" == typeof self && self.self === self ? self : \"object\" == typeof t && t.global === t ? t : void 0,\n          a = i.saveAs || (\"object\" != typeof window || window !== i ? function () {} : \"download\" in HTMLAnchorElement.prototype ? function (e, t, a) {\n            var s = i.URL || i.webkitURL,\n              c = document.createElement(\"a\");\n            t = t || e.name || \"download\", c.download = t, c.rel = \"noopener\", \"string\" == typeof e ? (c.href = e, c.origin === location.origin ? r(c) : o(c.href) ? n(e, t, a) : r(c, c.target = \"_blank\")) : (c.href = s.createObjectURL(e), setTimeout(function () {\n              s.revokeObjectURL(c.href);\n            }, 4e4), setTimeout(function () {\n              r(c);\n            }, 0));\n          } : \"msSaveOrOpenBlob\" in navigator ? function (e, t, i) {\n            if (t = t || e.name || \"download\", \"string\" != typeof e) navigator.msSaveOrOpenBlob(function (e, t) {\n              return void 0 === t ? t = {\n                autoBom: !1\n              } : \"object\" != typeof t && (console.warn(\"Deprecated: Expected third argument to be a object\"), t = {\n                autoBom: !t\n              }), t.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(e.type) ? new Blob([\"\\ufeff\", e], {\n                type: e.type\n              }) : e;\n            }(e, i), t);else if (o(e)) n(e, t, i);else {\n              var a = document.createElement(\"a\");\n              a.href = e, a.target = \"_blank\", setTimeout(function () {\n                r(a);\n              });\n            }\n          } : function (e, t, o, r) {\n            if ((r = r || open(\"\", \"_blank\")) && (r.document.title = r.document.body.innerText = \"downloading...\"), \"string\" == typeof e) return n(e, t, o);\n            var a = \"application/octet-stream\" === e.type,\n              s = /constructor/i.test(i.HTMLElement) || i.safari,\n              c = /CriOS\\/[\\d]+/.test(navigator.userAgent);\n            if ((c || a && s) && \"object\" == typeof FileReader) {\n              var l = new FileReader();\n              l.onloadend = function () {\n                var e = l.result;\n                e = c ? e : e.replace(/^data:[^;]*;/, \"data:attachment/file;\"), r ? r.location.href = e : location = e, r = null;\n              }, l.readAsDataURL(e);\n            } else {\n              var u = i.URL || i.webkitURL,\n                h = u.createObjectURL(e);\n              r ? r.location = h : location.href = h, r = null, setTimeout(function () {\n                u.revokeObjectURL(h);\n              }, 4e4);\n            }\n          });\n        i.saveAs = a.saveAs = a, e.exports = a;\n      })();\n    }),\n    i = L.Control.extend({\n      options: {\n        cropImageByInnerWH: !0,\n        hidden: !1,\n        domtoimageOptions: {},\n        position: \"topleft\",\n        screenName: \"screen\",\n        iconUrl: \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+\",\n        hideElementsWithSelectors: [\".leaflet-control-container\"],\n        onCropBorderSize: 2,\n        caption: null,\n        captionFontSize: 15,\n        captionFont: \"Arial\",\n        captionColor: \"black\",\n        captionBgColor: \"white\",\n        captionOffset: 5,\n        mimeType: \"image/png\",\n        debugMode: !1,\n        preventDownload: !1,\n        onPixelDataFail: function (e) {\n          var t = e.node,\n            n = e.error;\n          return console.warn(\"Map node is very big \" + t.scrollWidth + \"x\" + t.scrollHeight), console.warn(\"Add function: SimpleMapScreenshoter({\\n              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {\\n                 // Solutions:\\n                 // decrease size of map\\n                 // or decrease zoom level\\n                 // or remove elements with big distanses\\n                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap\\n                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)\\n              }\\n            })\"), Promise.reject(n);\n        }\n      },\n      onAdd: function () {\n        return this._container = L.DomUtil.create(\"div\", \"leaflet-control-simpleMapScreenshoter\"), this._link = null, this._screenState = {\n          status: 1,\n          promise: null\n        }, !1 === this.options.hidden && this._addScreenBtn(), this._onUserStartInteractWithMap = this._onUserStartInteractWithMap.bind(this), this._onUserEndInteractWithMap = this._onUserEndInteractWithMap.bind(this), this._map.on(\"zoomstart\", this._onUserStartInteractWithMap), this._map.on(\"move\", this._onUserStartInteractWithMap), this._map.on(\"zoomend\", this._onUserEndInteractWithMap), this._map.on(\"moveend\", this._onUserEndInteractWithMap), this._container;\n      },\n      takeScreen: function () {\n        var e = this,\n          t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : \"blob\",\n          n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},\n          o = {};\n        for (var r in this.options) n.hasOwnProperty(r) ? o[r] = n[r] : o[r] = this.options[r];\n        return 2 === this._screenState.status ? this._screenState.promise : (this._map.fire(\"simpleMapScreenshoter.takeScreen\"), this._screenState.status = 2, this._setElementsVisible(!1), this._screenState.promise = this._waitEndOfInteractions().then(function () {\n          return e._getPixelData(o);\n        }).then(function (t) {\n          return e._setElementsVisible(!0), e._toCanvas(t, o);\n        }).then(function (n) {\n          return \"image\" === t ? e._canvasToImage(n, o) : \"canvas\" === t ? n : e._canvasToBlob(n, o);\n        }).then(function (t) {\n          return e._screenState.status = 1, e._map.fire(\"simpleMapScreenshoter.done\"), t;\n        }).catch(function (t) {\n          return e._setElementsVisible(!0), e._screenState.status = 1, e._map.fire(\"simpleMapScreenshoter.error\", {\n            e: t\n          }), Promise.reject(t);\n        }), this._screenState.promise);\n      },\n      _setElementsVisible: function () {\n        var e = this,\n          t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];\n        this.options.hideElementsWithSelectors.forEach(function (n) {\n          var o = e._map._container.querySelectorAll(n),\n            r = !0,\n            i = !1,\n            a = void 0;\n          try {\n            for (var s, c = o[Symbol.iterator](); !(r = (s = c.next()).done); r = !0) {\n              s.value.style.opacity = !1 === t ? 0 : 1;\n            }\n          } catch (e) {\n            i = !0, a = e;\n          } finally {\n            try {\n              !r && c.return && c.return();\n            } finally {\n              if (i) throw a;\n            }\n          }\n        });\n      },\n      _canvasToImage: function (e, t) {\n        var n = t.mimeType,\n          o = e.toDataURL(n);\n        return -1 === o.indexOf(\"base64\") ? Promise.reject(new Error(\"Base64 image generation error\")) : Promise.resolve(o);\n      },\n      _canvasToBlob: function (e, t) {\n        var n = t.mimeType;\n        return new Promise(function (t, o) {\n          e.toBlob(function (e) {\n            t(e);\n          }, n);\n        });\n      },\n      _toCanvas: function (e, t) {\n        var n = t.captionOffset,\n          o = t.caption,\n          r = t.captionFontSize,\n          i = t.captionFont,\n          a = t.captionColor,\n          s = t.captionBgColor,\n          c = this._node,\n          l = c.screenHeight,\n          u = c.screenWidth,\n          h = document.createElement(\"canvas\");\n        h.width = u, h.height = l;\n        for (var f = h.getContext(\"2d\"), d = f.createImageData(u, l), p = 0; p < e.length; ++p) d.data[p] = e[p];\n        f.putImageData(d, 0, 0), d = null;\n        var m = document.createElement(\"canvas\"),\n          g = m.getContext(\"2d\"),\n          w = 0,\n          M = 0,\n          y = l,\n          v = u;\n        if (!0 === this.options.cropImageByInnerWH) {\n          for (var L = [], b = 0, P = 0; P < l; ++P) {\n            b = 0;\n            for (var x = 0; x < u; ++x) 0 === e[4 * P * u + 4 * x + 4] && b++;\n            b === u && L.push(P);\n          }\n          var S = this._getMinAndMaxOnValuesBreak(L);\n          w = S.min;\n          for (var C = u, T = S.max, j = [], D = 0, E = M; E < C; ++E) {\n            D = 0;\n            for (var N = 0; N < l; ++N) 0 === e[4 * N * u + 4 * E + 4] && D++;\n            D === l && j.push(E);\n          }\n          var I = this._getMinAndMaxOnValuesBreak(j);\n          M = I.min, C = I.max, (0 === M && 0 === C || null === C) && (C = u), (0 === w && 0 === T || null === T) && (T = l), !0 === this.options.debugMode && (console.log(\"emptyYLine\", L), console.log(\"minMaxY\", S), console.log(\"emptyXLine\", j), console.log(\"minMaxX\", I), console.log(\"debugX\", {}), console.log(\"debugY\", {})), 0 === w && T === l && 0 === M && C === u || (w += this.options.onCropBorderSize, T -= this.options.onCropBorderSize, M += this.options.onCropBorderSize, C -= this.options.onCropBorderSize), y = T - w, v = C - M, m.width = v, m.height = y;\n        } else m.width = v, m.height = y;\n        var A = null;\n        return o && (A = \"function\" == typeof o ? o.call(this) : o), null !== A && (m.height = m.height + (n + r + n), g.beginPath(), g.rect(0, 0, m.width, m.height), g.fillStyle = s, g.fill(), g.save()), g.drawImage(h, M, w, v, y, 0, 0, v, y), null !== A && (g.font = r + \"px \" + i, g.fillStyle = a, g.fillText(A, n, y + n + r)), Promise.resolve(m);\n      },\n      _getMinAndMaxOnValuesBreak: function (e) {\n        for (var t = 0, n = 0, o = !1, r = 1; r < e.length; r++) {\n          if (e[r] - 1 !== e[r - 1]) {\n            n = e[r], o = !0;\n            break;\n          }\n          t = e[r];\n        }\n        return !1 === o && e[0] > 1 ? (t = 0, n = e[0]) : !1 === o && (t = e[e.length - 1] || 0, n = null), {\n          min: t,\n          max: n\n        };\n      },\n      _getPixelData: function (e) {\n        var t = this,\n          n = e.domtoimageOptions,\n          o = void 0 === n ? {} : n;\n        return this._getPixelDataOfNormalMap(o).catch(function (e) {\n          return console.warn(\"May be map size very big on that zoom level, we have error:\", e.toString()), console.warn(\"You can manually hide map elements with large distances between them for fix that warn\"), t._getPixelDataOfBigMap(o);\n        });\n      },\n      _getPixelDataOfNormalMap: function () {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n          t = this._map.getContainer();\n        return this._node = {\n          node: t,\n          screenHeight: t.scrollHeight,\n          screenWidth: t.scrollWidth\n        }, o.toPixelData(t, e);\n      },\n      _getPixelDataOfBigMap: function () {\n        var e = this,\n          t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n          n = this._map.getContainer(),\n          r = this._map.getPane(\"mapPane\");\n        r.style.width = 2 * n.clientWidth + \"px\", r.style.height = 2 * n.clientHeight + \"px\", r.style.overflow = \"hidden\";\n        var i = function () {\n          r.style.width = \"initial\", r.style.height = \"initial\", r.style.overflow = \"initial\";\n        };\n        return this._node = {\n          node: n,\n          screenHeight: n.scrollHeight,\n          screenWidth: n.scrollWidth\n        }, o.toPixelData(n, t).then(function (e) {\n          return i(), e;\n        }).catch(function (o) {\n          return i(), n.scrollHeight >= 4e3 || n.scrollWidth >= 4e3 ? e.options.onPixelDataFail({\n            plugin: e,\n            node: n,\n            mapPane: r,\n            error: o,\n            domtoimageOptions: t\n          }) : Promise.reject(o);\n        });\n      },\n      _addScreenBtn: function () {\n        this._link = L.DomUtil.create(\"a\", \"leaflet-control-simpleMapScreenshoter-btn\", this._container), this._addCss(), L.DomEvent.addListener(this._link, \"click\", this._onScreenBtn, this), L.DomEvent.disableClickPropagation(this._link);\n      },\n      _addCss: function () {\n        var e = \"\\n    .leaflet-control-simpleMapScreenshoter{\\n       border: 2px solid rgba(0,0,0,0.2);\\n       background-clip: padding-box;\\n    }\\n    .leaflet-control-simpleMapScreenshoter a{\\n       background-color: #fff;\\n       border-bottom: 1px solid #ccc;\\n       width: 30px;\\n       height: 30px;\\n       line-height: 30px;\\n       display: block;\\n       text-align: center;\\n       text-decoration: none;\\n       color: black;\\n       overflow: hidden;\\n       border-radius: 2px;\\n       background-image: url('\" + this.options.iconUrl + \"');\\n       background-position: 46% 41%;\\n       background-repeat: no-repeat;\\n       background-size: 63%;\\n    }\\n    .leaflet-control-simpleMapScreenshoter a:hover{\\n       cursor: pointer;\\n    }\\n    \",\n          t = document.head || document.getElementsByTagName(\"head\")[0],\n          n = document.createElement(\"style\");\n        n.appendChild(document.createTextNode(e)), t.appendChild(n);\n      },\n      _onScreenBtn: function () {\n        var e = this;\n        this._map.fire(\"simpleMapScreenshoter.click\"), this.options.preventDownload || this.takeScreen().then(function (t) {\n          var n = \"function\" == typeof e.options.screenName ? e.options.screenName.call(e) : e.options.screenName;\n          r.saveAs(t, n + \".png\");\n        }).catch(function (t) {\n          e._map.fire(\"simpleMapScreenshoter.error\", {\n            e: t\n          });\n        });\n      },\n      _onUserStartInteractWithMap: function () {\n        this._interaction = !0;\n      },\n      _onUserEndInteractWithMap: function () {\n        this._interaction = !1;\n      },\n      _waitEndOfInteractions: function () {\n        var e = this;\n        return new Promise(function (t) {\n          var n = setInterval(function () {\n            e._interaction || (t(), clearInterval(n));\n          }, 100);\n        });\n      }\n    }),\n    a = (L.Control.SimpleMapScreenshoter = i, L.simpleMapScreenshoter = function (e) {\n      return new L.Control.SimpleMapScreenshoter(e);\n    }, i);\n  e.default = a, e.SimpleMapScreenshoter = i, Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  });\n});","map":{"version":3,"names":["t","n","escape","e","replace","parseExtension","o","mimeType","toLowerCase","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","dataAsUrl","isDataUrl","search","canvasToBlob","toBlob","Promise","d","toDataURL","split","length","r","Uint8Array","charCodeAt","Blob","type","resolveUrl","document","implementation","createHTMLDocument","createElement","head","appendChild","body","href","getAndEncode","h","impl","urlCache","find","url","promise","push","options","cacheBust","test","Date","getTime","httpTimeout","XMLHttpRequest","i","a","console","error","onreadystatechange","readyState","status","FileReader","onloadend","result","readAsDataURL","response","ontimeout","responseType","timeout","useCredentials","withCredentials","open","send","imagePlaceholder","uid","Math","random","pow","toString","slice","delay","setTimeout","asArray","escapeXhtml","makeImage","Image","crossOrigin","onload","onerror","src","resolve","width","scrollWidth","height","scrollHeight","exec","f","getPropertyValue","parseFloat","inlineAll","then","forEach","shouldProcess","readUrls","inline","filter","RegExp","resolveAll","s","all","map","join","readAll","styleSheets","Object","getPrototypeOf","hasOwnProperty","cssRules","bind","log","CSSRule","FONT_FACE_RULE","style","parentStyleSheet","cssText","c","Element","setProperty","HTMLImageElement","l","childNodes","newImage","u","toSvg","p","toPng","raster","m","toJpeg","quality","toPixelData","getContext","getImageData","data","toCanvas","fontFaces","images","util","inliner","exports","getComputedStyle","window","atob","HTMLCanvasElement","nodeName","html2canvas","contentDocument","cloneNode","font","fontFamily","fontFeatureSettings","fontKerning","fontSize","fontStretch","fontStyle","fontVariant","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariationSettings","fontWeight","removeProperty","v","y","visibility","position","contentWindow","write","textContent","removeChild","tagName","getPropertyPriority","getAttribute","setAttribute","createTextNode","HTMLTextAreaElement","innerHTML","value","HTMLInputElement","SVGElement","SVGRectElement","g","w","bgcolor","backgroundColor","keys","onclone","XMLSerializer","serializeToString","scale","fillStyle","fillRect","mozImageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingEnabled","drawImage","M","clearTimeout","dispatchEvent","MouseEvent","createEvent","initMouseEvent","self","global","saveAs","HTMLAnchorElement","prototype","URL","webkitURL","name","download","rel","origin","location","target","createObjectURL","revokeObjectURL","navigator","msSaveOrOpenBlob","autoBom","warn","title","innerText","HTMLElement","safari","userAgent","L","Control","extend","cropImageByInnerWH","hidden","domtoimageOptions","screenName","iconUrl","hideElementsWithSelectors","onCropBorderSize","caption","captionFontSize","captionFont","captionColor","captionBgColor","captionOffset","debugMode","preventDownload","onPixelDataFail","node","reject","onAdd","_container","DomUtil","create","_link","_screenState","_addScreenBtn","_onUserStartInteractWithMap","_onUserEndInteractWithMap","_map","on","takeScreen","arguments","fire","_setElementsVisible","_waitEndOfInteractions","_getPixelData","_toCanvas","_canvasToImage","_canvasToBlob","catch","querySelectorAll","Symbol","iterator","next","done","opacity","return","indexOf","Error","_node","screenHeight","screenWidth","createImageData","putImageData","b","P","x","S","_getMinAndMaxOnValuesBreak","min","C","T","max","j","D","E","N","I","A","call","beginPath","rect","fill","save","fillText","_getPixelDataOfNormalMap","_getPixelDataOfBigMap","getContainer","getPane","clientWidth","clientHeight","overflow","restoreMapPane","plugin","mapPane","_addCss","DomEvent","addListener","_onScreenBtn","disableClickPropagation","getElementsByTagName","_interaction","setInterval","clearInterval","SimpleMapScreenshoter","simpleMapScreenshoter","default","defineProperty"],"sources":["C:\\Users\\kylea\\Documents\\GIS Projects\\GEOG778\\kcrest_client\\node_modules\\leaflet-simple-map-screenshoter\\node_modules\\dom-to-image-more\\dist\\dom-to-image-more.min.js","C:\\Users\\kylea\\Documents\\GIS Projects\\GEOG778\\kcrest_client\\node_modules\\leaflet-simple-map-screenshoter\\node_modules\\file-saver\\dist\\FileSaver.min.js","C:\\Users\\kylea\\Documents\\GIS Projects\\GEOG778\\kcrest_client\\node_modules\\leaflet-simple-map-screenshoter\\src\\SimpleMapScreenshoter.js","C:\\Users\\kylea\\Documents\\GIS Projects\\GEOG778\\kcrest_client\\node_modules\\leaflet-simple-map-screenshoter\\src\\bootstrap.js"],"sourcesContent":["/*! dom-to-image-more 06-09-2022 */\n!function(t){\"use strict\";const f={escape:function(t){return t.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g,\"\\\\$1\")},parseExtension:e,mimeType:function(t){t=e(t).toLowerCase();return function(){var t=\"application/font-woff\",e=\"image/jpeg\";return{woff:t,woff2:t,ttf:\"application/font-truetype\",eot:\"application/vnd.ms-fontobject\",png:\"image/png\",jpg:e,jpeg:e,gif:\"image/gif\",tiff:\"image/tiff\",svg:\"image/svg+xml\"}}()[t]||\"\"},dataAsUrl:function(t,e){return`data:${e};base64,`+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(e){if(e.toBlob)return new Promise(function(t){e.toBlob(t)});return function(o){return new Promise(function(t){const e=l(o.toDataURL().split(\",\")[1]);var n=e.length;const r=new Uint8Array(n);for(let t=0;t<n;t++)r[t]=e.charCodeAt(t);t(new Blob([r],{type:\"image/png\"}))})}(e)},resolveUrl:function(t,e){const n=document.implementation.createHTMLDocument(),r=n.createElement(\"base\"),o=(n.head.appendChild(r),n.createElement(\"a\"));return n.body.appendChild(o),r.href=e,o.href=t,o.href},getAndEncode:function(u){let t=s.impl.urlCache.find(function(t){return t.url===u});t||(t={url:u,promise:null},s.impl.urlCache.push(t));null===t.promise&&(s.impl.options.cacheBust&&(u+=(/\\?/.test(u)?\"&\":\"?\")+(new Date).getTime()),t.promise=new Promise(function(n){const t=s.impl.options.httpTimeout,r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState)if(200!==r.status)o?n(o):i(`cannot fetch resource: ${u}, status: `+r.status);else{const e=new FileReader;e.onloadend=function(){var t=e.result.split(/,/)[1];n(t)},e.readAsDataURL(r.response)}},r.ontimeout=function(){o?n(o):i(`timeout of ${t}ms occured while fetching resource: `+u)},r.responseType=\"blob\",r.timeout=t,s.impl.options.useCredentials&&(r.withCredentials=!0),r.open(\"GET\",u,!0),r.send();let o;var e;function i(t){console.error(t),n(\"\")}s.impl.options.imagePlaceholder&&(e=s.impl.options.imagePlaceholder.split(/,/))&&e[1]&&(o=e[1])}));return t.promise},uid:function(){let t=0;return function(){return\"u\"+(\"0000\"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}}(),delay:function(n){return function(e){return new Promise(function(t){setTimeout(function(){t(e)},n)})}},asArray:function(e){const n=[],r=e.length;for(let t=0;t<r;t++)n.push(e[t]);return n},escapeXhtml:function(t){return t.replace(/%/g,\"%25\").replace(/#/g,\"%23\").replace(/\\n/g,\"%0A\")},makeImage:function(r){return\"data:,\"!==r?new Promise(function(t,e){const n=new Image;s.impl.options.useCredentials&&(n.crossOrigin=\"use-credentials\"),n.onload=function(){t(n)},n.onerror=e,n.src=r}):Promise.resolve()},width:function(t){var e=r(t,\"border-left-width\"),n=r(t,\"border-right-width\");return t.scrollWidth+e+n},height:function(t){var e=r(t,\"border-top-width\"),n=r(t,\"border-bottom-width\");return t.scrollHeight+e+n}};function e(t){t=/\\.([^\\.\\/]*?)(\\?|$)/g.exec(t);return t?t[1]:\"\"}function r(t,e){const n=h(t).getPropertyValue(e);return parseFloat(n.replace(\"px\",\"\"))}const o=function(){const r=/url\\(['\"]?([^'\"]+?)['\"]?\\)/g;return{inlineAll:function(e,r,o){if(!t(e))return Promise.resolve(e);return Promise.resolve(e).then(n).then(function(t){let n=Promise.resolve(e);return t.forEach(function(e){n=n.then(function(t){return i(t,e,r,o)})}),n})},shouldProcess:t,impl:{readUrls:n,inline:i}};function t(t){return-1!==t.search(r)}function n(t){const e=[];for(var n;null!==(n=r.exec(t));)e.push(n[1]);return e.filter(function(t){return!f.isDataUrl(t)})}function i(n,r,e,t){return Promise.resolve(r).then(function(t){return e?f.resolveUrl(t,e):t}).then(t||f.getAndEncode).then(function(t){return f.dataAsUrl(t,f.mimeType(r))}).then(function(t){return n.replace((e=r,new RegExp(`(url\\\\(['\"]?)(${f.escape(e)})(['\"]?\\\\))`,\"g\")),`$1${t}$3`);var e})}}(),i={resolveAll:function(){return n().then(function(t){return Promise.all(t.map(function(t){return t.resolve()}))}).then(function(t){return t.join(\"\\n\")})},impl:{readAll:n}};function n(){return Promise.resolve(f.asArray(document.styleSheets)).then(function(t){const n=[];return t.forEach(function(e){if(Object.getPrototypeOf(e).hasOwnProperty(\"cssRules\"))try{f.asArray(e.cssRules||[]).forEach(n.push.bind(n))}catch(t){console.log(\"Error while reading CSS rules from \"+e.href,t.toString())}}),n}).then(function(t){return t.filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).filter(function(t){return o.shouldProcess(t.style.getPropertyValue(\"src\"))})}).then(function(t){return t.map(e)});function e(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return o.inlineAll(e.cssText,t)},src:function(){return e.style.getPropertyValue(\"src\")}}}}const u={inlineAll:function e(t){if(!(t instanceof Element))return Promise.resolve(t);return n(t).then(function(){return t instanceof HTMLImageElement?a(t).inline():Promise.all(f.asArray(t.childNodes).map(function(t){return e(t)}))});function n(e){const n=e.style.getPropertyValue(\"background\");return n?o.inlineAll(n).then(function(t){e.style.setProperty(\"background\",t,n)}).then(function(){return e}):Promise.resolve(e)}},impl:{newImage:a}};function a(n){return{inline:function(t){if(f.isDataUrl(n.src))return Promise.resolve();return Promise.resolve(n.src).then(t||f.getAndEncode).then(function(t){return f.dataAsUrl(t,f.mimeType(n.src))}).then(function(e){return new Promise(function(t){n.onload=t,n.onerror=t,n.src=e})})}}}const c={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1,httpTimeout:3e4},s={toSvg:m,toPng:function(t,e){return(e=e||{}).raster=!0,d(t,e).then(function(t){return t.toDataURL()})},toJpeg:function(t,e){return(e=e||{}).raster=!0,d(t,e).then(function(t){return t.toDataURL(\"image/jpeg\",e.quality||1)})},toBlob:function(t,e){return(e=e||{}).raster=!0,d(t,e).then(f.canvasToBlob)},toPixelData:function(e,t){return(t=t||{}).raster=!0,d(e,t).then(function(t){return t.getContext(\"2d\").getImageData(0,0,f.width(e),f.height(e)).data})},toCanvas:function(t,e){return(e=e||{}).raster=!0,d(t,e||{})},impl:{fontFaces:i,images:u,util:f,inliner:o,urlCache:[],options:{}}},h=(\"object\"==typeof exports&&\"object\"==typeof module?module.exports=s:t.domtoimage=s,t.getComputedStyle||window.getComputedStyle),l=t.atob||window.atob;function m(r,o){var t=o=o||{};return void 0===t.imagePlaceholder?s.impl.options.imagePlaceholder=c.imagePlaceholder:s.impl.options.imagePlaceholder=t.imagePlaceholder,void 0===t.cacheBust?s.impl.options.cacheBust=c.cacheBust:s.impl.options.cacheBust=t.cacheBust,void 0===t.useCredentials?s.impl.options.useCredentials=c.useCredentials:s.impl.options.useCredentials=t.useCredentials,Promise.resolve(r).then(function(t){return function i(e,u,s,a,l=null){if(!s&&u&&!u(e))return Promise.resolve();return Promise.resolve(e).then(t).then(function(t){return n(e,t)}).then(function(t){return r(e,t,a)});function t(t){return t instanceof HTMLCanvasElement?f.makeImage(t.toDataURL()):\"IFRAME\"===t.nodeName?html2canvas(t.contentDocument.body).then(t=>t.toDataURL()).then(f.makeImage):t.cloneNode(!1)}function n(o,t){const e=o.childNodes;return 0===e.length?Promise.resolve(t):n(t,f.asArray(e)).then(function(){return t});function n(e,t){const n=h(o);let r=Promise.resolve();return t.forEach(function(t){r=r.then(function(){return i(t,u,!1,a,n)}).then(function(t){t&&e.appendChild(t)})}),r}}function r(a,c,o){return c instanceof Element?Promise.resolve().then(t).then(e).then(n).then(r).then(function(){return c}):c;function t(){function r(t,e){e.font=t.font,e.fontFamily=t.fontFamily,e.fontFeatureSettings=t.fontFeatureSettings,e.fontKerning=t.fontKerning,e.fontSize=t.fontSize,e.fontStretch=t.fontStretch,e.fontStyle=t.fontStyle,e.fontVariant=t.fontVariant,e.fontVariantCaps=t.fontVariantCaps,e.fontVariantEastAsian=t.fontVariantEastAsian,e.fontVariantLigatures=t.fontVariantLigatures,e.fontVariantNumeric=t.fontVariantNumeric,e.fontVariationSettings=t.fontVariationSettings,e.fontWeight=t.fontWeight}function t(t,e){const n=h(t);n.cssText?(e.style.cssText=n.cssText,r(n,e.style)):(o?y(t,n,e,s):P(n,l,e),s&&([\"inset-block\",\"inset-block-start\",\"inset-block-end\"].forEach(t=>e.style.removeProperty(t)),[\"left\",\"right\",\"top\",\"bottom\"].forEach(t=>{e.style.getPropertyValue(t)&&e.style.setProperty(t,\"0px\")})))}t(a,c)}function e(){function e(o){const i=h(a,o),t=i.getPropertyValue(\"content\");if(\"\"!==t&&\"none\"!==t){const u=f.uid(),n=c.getAttribute(\"class\"),r=(n&&c.setAttribute(\"class\",n+\" \"+u),document.createElement(\"style\"));function e(){const t=`.${u}:`+o,e=(i.cssText?n:r)();return document.createTextNode(t+`{${e}}`);function n(){return`${i.cssText} content: ${i.getPropertyValue(\"content\")};`}function r(){return f.asArray(i).map(t).join(\"; \")+\";\";function t(t){return t+\": \"+i.getPropertyValue(t)+(i.getPropertyPriority(t)?\" !important\":\"\")}}}r.appendChild(e()),c.appendChild(r)}}[\":before\",\":after\"].forEach(function(t){e(t)})}function n(){a instanceof HTMLTextAreaElement&&(c.innerHTML=a.value),a instanceof HTMLInputElement&&c.setAttribute(\"value\",a.value)}function r(){c instanceof SVGElement&&(c.setAttribute(\"xmlns\",\"http://www.w3.org/2000/svg\"),c instanceof SVGRectElement&&[\"width\",\"height\"].forEach(function(t){const e=c.getAttribute(t);e&&c.style.setProperty(t,e)}))}}}(t,o.filter,!0,!o.raster)}).then(p).then(g).then(function(e){o.bgcolor&&(e.style.backgroundColor=o.bgcolor);o.width&&(e.style.width=o.width+\"px\");o.height&&(e.style.height=o.height+\"px\");o.style&&Object.keys(o.style).forEach(function(t){e.style[t]=o.style[t]});let t=null;\"function\"==typeof o.onclone&&(t=o.onclone(e));return Promise.resolve(t).then(function(){return e})}).then(function(t){return t=t,e=o.width||f.width(r),n=o.height||f.height(r),Promise.resolve(t).then(function(t){return t.setAttribute(\"xmlns\",\"http://www.w3.org/1999/xhtml\"),(new XMLSerializer).serializeToString(t)}).then(f.escapeXhtml).then(function(t){return`<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">${t}</foreignObject>`}).then(function(t){return`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${e}\" height=\"${n}\">${t}</svg>`}).then(function(t){return\"data:image/svg+xml;charset=utf-8,\"+t});var e,n}).then(function(t){return s.impl.urlCache=[],t})}function d(o,i){return m(o,i).then(f.makeImage).then(f.delay(0)).then(function(t){var e=\"number\"!=typeof i.scale?1:i.scale;const n=function(t,e){const n=document.createElement(\"canvas\");if(n.width=(i.width||f.width(t))*e,n.height=(i.height||f.height(t))*e,i.bgcolor){const r=n.getContext(\"2d\");r.fillStyle=i.bgcolor,r.fillRect(0,0,n.width,n.height)}return n}(o,e),r=n.getContext(\"2d\");return r.mozImageSmoothingEnabled=!1,r.msImageSmoothingEnabled=!1,r.imageSmoothingEnabled=!1,t&&(r.scale(e,e),r.drawImage(t,0,0)),w&&(document.body.removeChild(w),w=null,v&&clearTimeout(v),v=setTimeout(()=>{v=null,b={}},2e4)),n})}function p(n){return i.resolveAll().then(function(t){const e=document.createElement(\"style\");return n.appendChild(e),e.appendChild(document.createTextNode(t)),n})}function g(t){return u.inlineAll(t).then(function(){return t})}function y(t,e,n,r){const o=n.style,i=t.style;for(var u of e){var a=e.getPropertyValue(u),c=i.getPropertyValue(u),s=(i.setProperty(u,r?\"initial\":\"unset\"),e.getPropertyValue(u));s!==a?o.setProperty(u,a):o.removeProperty(u),i.setProperty(u,c)}}function P(n,r,t){const o=function(t){if(b[t])return b[t];w||((w=document.createElement(\"iframe\")).style.visibility=\"hidden\",w.style.position=\"fixed\",document.body.appendChild(w),w.contentWindow.document.write('<!DOCTYPE html><meta charset=\"UTF-8\"><title>sandbox</title><body>'));const e=document.createElement(t),n=(w.contentWindow.document.body.appendChild(e),e.textContent=\".\",w.contentWindow.getComputedStyle(e)),r={};return f.asArray(n).forEach(function(t){r[t]=\"width\"===t||\"height\"===t?\"auto\":n.getPropertyValue(t)}),w.contentWindow.document.body.removeChild(e),b[t]=r}(t.tagName),i=t.style;f.asArray(n).forEach(function(t){var e=n.getPropertyValue(t);(e!==o[t]||r&&e!==r.getPropertyValue(t))&&i.setProperty(t,e,n.getPropertyPriority(t))})}let v=null,w=null,b={}}(this);","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","/* global L */\nimport domtoimage from 'dom-to-image-more'\nimport fileSaver from 'file-saver'\n\nexport const STATUS_READY = 1\nexport const STATUS_PENDING = 2\nexport const ICON_SVG_BASE64 = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+'\n\nexport const SimpleMapScreenshoter = L.Control.extend({\n    options: {\n        cropImageByInnerWH: true,\n        hidden: false,\n        domtoimageOptions: {},\n        position: 'topleft',\n        screenName: 'screen',\n        iconUrl: ICON_SVG_BASE64,\n        hideElementsWithSelectors: [\n            '.leaflet-control-container'\n        ],\n        onCropBorderSize: 2,\n        caption: null,\n        captionFontSize: 15,\n        captionFont: 'Arial',\n        captionColor: 'black',\n        captionBgColor: 'white',\n        captionOffset: 5,\n        mimeType: 'image/png',\n        debugMode: false,\n        preventDownload: false,\n        onPixelDataFail: function ({ node, error }) {\n            console.warn(`Map node is very big ${node.scrollWidth}x${node.scrollHeight}`)\n            console.warn(`Add function: SimpleMapScreenshoter({\n              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {\n                 // Solutions:\n                 // decrease size of map\n                 // or decrease zoom level\n                 // or remove elements with big distanses\n                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap\n                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)\n              }\n            })`)\n            return Promise.reject(error)\n        }\n    },\n    onAdd () {\n        this._container = L.DomUtil.create(\n            'div',\n            'leaflet-control-simpleMapScreenshoter'\n        )\n        this._link = null\n        this._screenState = {\n            status: STATUS_READY,\n            promise: null\n        }\n        if (this.options.hidden === false) {\n            this._addScreenBtn()\n        }\n\n        this._onUserStartInteractWithMap = this._onUserStartInteractWithMap.bind(this)\n        this._onUserEndInteractWithMap = this._onUserEndInteractWithMap.bind(this)\n\n        this._map.on('zoomstart', this._onUserStartInteractWithMap)\n        this._map.on('move', this._onUserStartInteractWithMap)\n\n        this._map.on('zoomend', this._onUserEndInteractWithMap)\n        this._map.on('moveend', this._onUserEndInteractWithMap)\n\n        return this._container\n    },\n    /**\n     * @param format {string} blob or png\n     * @param sreenOptions {Object}\n     * @returns {Promise<Blob>|Promise<Base64>} Blob or png image\n     */\n    takeScreen (format = 'blob', sreenOptions = {}) {\n        const options = {}\n        for (let opt in this.options) {\n            if (sreenOptions.hasOwnProperty(opt)) {\n                options[opt] = sreenOptions[opt]\n            } else {\n                options[opt] = this.options[opt]\n            }\n        }\n        if (this._screenState.status === STATUS_PENDING) {\n            return this._screenState.promise\n        }\n        this._map.fire('simpleMapScreenshoter.takeScreen')\n        this._screenState.status = STATUS_PENDING\n        this._setElementsVisible(false)\n        this._screenState.promise = this._waitEndOfInteractions()\n            .then(() => this._getPixelData(options))\n            .then(pixels => {\n                this._setElementsVisible(true)\n                return this._toCanvas(pixels, options)\n            })\n            .then(canvas => {\n                if (format === 'image') {\n                    return this._canvasToImage(canvas, options)\n                } else if (format === 'canvas') {\n                    return canvas\n                }\n                return this._canvasToBlob(canvas, options)\n            })\n            .then(image => {\n                this._screenState.status = STATUS_READY\n                this._map.fire('simpleMapScreenshoter.done')\n                return image\n            }).catch(e => {\n                this._setElementsVisible(true)\n                this._screenState.status = STATUS_READY\n                this._map.fire('simpleMapScreenshoter.error', {e})\n                return Promise.reject(e)\n            })\n        return this._screenState.promise\n    },\n    /**\n     * @param isVisible\n     * @private\n     */\n    _setElementsVisible (isVisible = false) {\n        this.options.hideElementsWithSelectors.forEach(selector => {\n            const els = this._map._container.querySelectorAll(selector)\n            for (let el of els) {\n                el.style.opacity = isVisible === false\n                    ? 0\n                    : 1\n            }\n        })\n    },\n    /**\n     * @param canvas\n     * @param mimeType\n     * @returns {Promise<Base64>}\n     * @private\n     */\n    _canvasToImage (canvas, {mimeType}) {\n        const image = canvas.toDataURL(mimeType)\n        if (image.indexOf('base64') === -1) {\n            return Promise.reject(new Error('Base64 image generation error'))\n        }\n        return Promise.resolve(image)\n    },\n    /**\n     * @param canvas {Canvas}\n     * @returns {Promise<Blob>}\n     * @private\n     */\n    _canvasToBlob (canvas, {mimeType}) {\n        return new Promise((resolve, reject) => {\n            canvas.toBlob(blob => {\n                resolve(blob)\n            }, mimeType)\n        })\n    },\n    /**\n     * @param pixels {Uint8Array}\n     * @param options {Object}\n     * @returns {Promise<Canvas>}\n     * @private\n     */\n    _toCanvas (pixels, options) {\n        let {captionOffset, caption, captionFontSize, captionFont, captionColor, captionBgColor} = options\n        let {screenHeight, screenWidth} = this._node\n        let canvas = document.createElement('canvas')\n        canvas.width = screenWidth\n        canvas.height = screenHeight\n\n        let ctx = canvas.getContext('2d')\n        let imageData = ctx.createImageData(screenWidth, screenHeight)\n        for (let i = 0; i < pixels.length; ++i) {\n            imageData.data[i] = pixels[i]\n        }\n        ctx.putImageData(imageData, 0, 0)\n        imageData = null\n\n        let transformedCanvas = document.createElement('canvas')\n        let transformedCanvasCtx = transformedCanvas.getContext('2d')\n        let minY = 0\n        let minX = 0\n        let height = screenHeight\n        let width = screenWidth\n\n        // crop blank opacity from image borders\n        if (this.options.cropImageByInnerWH === true) {\n            let pixelAtXYOffset = 0\n\n            let debugY = {}\n            let debugX = {}\n\n            let emptyYLine = []\n            let emptyCountOnHorizontal = 0\n            for (let y = 0; y < screenHeight; ++y) {\n                emptyCountOnHorizontal = 0\n                for (let x = 0; x < screenWidth; ++x) {\n                    pixelAtXYOffset = (4 * y * screenWidth) + (4 * x)\n                    // find opacity = 0 on horizontal\n                    if (pixels[pixelAtXYOffset + 4] === 0) {\n                        emptyCountOnHorizontal++\n                    }\n                    /* if (y === Math.round(screenHeight / 2)) {\n                        debugY[x] = pixels.slice(pixelAtXYOffset, pixelAtXYOffset + 4)\n                    } */\n                }\n                // save empty horizontal\n                if (emptyCountOnHorizontal === screenWidth) {\n                    emptyYLine.push(y)\n                }\n            }\n            const minMaxY = this._getMinAndMaxOnValuesBreak(emptyYLine)\n            minY = minMaxY.min\n            let maxX = screenWidth\n            let maxY = minMaxY.max\n\n            let emptyXLine = []\n            let emptyCountOnVertical = 0\n            for (let x = minX; x < maxX; ++x) {\n                emptyCountOnVertical = 0\n                for (let y = 0; y < screenHeight; ++y) {\n                    pixelAtXYOffset = (4 * y * screenWidth) + (4 * x)\n                    // find opacity = 0 on vertical\n                    if (pixels[pixelAtXYOffset + 4] === 0) {\n                        emptyCountOnVertical++\n                    }\n\n                    /* if (x === screenWidth - 5) {\n                        debugX[y] = pixels.slice(pixelAtXYOffset, pixelAtXYOffset + 4)\n                    } */\n                }\n                // save empty vertical\n                if (emptyCountOnVertical === screenHeight) {\n                    emptyXLine.push(x)\n                }\n            }\n            const minMaxX = this._getMinAndMaxOnValuesBreak(emptyXLine)\n            minX = minMaxX.min\n            maxX = minMaxX.max\n\n            if ((minX === 0 && maxX === 0) || maxX === null) {\n                maxX = screenWidth\n            }\n            if ((minY === 0 && maxY === 0) || maxY === null) {\n                maxY = screenHeight\n            }\n\n            if (this.options.debugMode === true) {\n                console.log('emptyYLine', emptyYLine)\n                console.log('minMaxY', minMaxY)\n                console.log('emptyXLine', emptyXLine)\n                console.log('minMaxX', minMaxX)\n                console.log('debugX', debugX)\n                console.log('debugY', debugY)\n            }\n\n            // if w/h changed, scale inner\n            if (minY !== 0 || maxY !== screenHeight || minX !== 0 || maxX !== screenWidth) {\n                minY = minY + this.options.onCropBorderSize\n                maxY = maxY - this.options.onCropBorderSize\n                minX = minX + this.options.onCropBorderSize\n                maxX = maxX - this.options.onCropBorderSize\n            }\n            height = maxY - minY\n            width = maxX - minX\n            transformedCanvas.width = width\n            transformedCanvas.height = height\n        } else {\n            transformedCanvas.width = width\n            transformedCanvas.height = height\n        }\n\n        let captionTxt = null\n        if (caption) {\n            captionTxt = typeof caption === 'function'\n                ? caption.call(this)\n                : caption\n        }\n\n        // increase size of canvas for write caption\n        if (captionTxt !== null) {\n            transformedCanvas.height = transformedCanvas.height + (captionOffset + captionFontSize + captionOffset)\n            // set bg color\n            transformedCanvasCtx.beginPath()\n            transformedCanvasCtx.rect(0, 0, transformedCanvas.width, transformedCanvas.height)\n            transformedCanvasCtx.fillStyle = captionBgColor\n            transformedCanvasCtx.fill()\n            transformedCanvasCtx.save()\n        }\n\n        transformedCanvasCtx.drawImage(canvas, minX, minY, width, height, 0, 0, width, height)\n\n        // write caption text\n        if (captionTxt !== null) {\n            transformedCanvasCtx.font = `${captionFontSize}px ${captionFont}`\n            transformedCanvasCtx.fillStyle = captionColor\n            transformedCanvasCtx.fillText(captionTxt, captionOffset, height + captionOffset + captionFontSize)\n        }\n\n        return Promise.resolve(transformedCanvas)\n    },\n    /**\n     * find break in array [0,1,2,3,40,41,42]\n     * we get 3 and 40\n     * @param arr {Array}\n     * @returns {{min: number, max: number}}\n     * @private\n     */\n    _getMinAndMaxOnValuesBreak (arr) {\n        let min = 0\n        let max = 0\n        let hasBreak = false\n        for (let i = 1; i < arr.length; i++) {\n            if (arr[i] - 1 === arr[i - 1]) {\n                min = arr[i]\n            } else {\n                max = arr[i]\n                hasBreak = true\n                break\n            }\n        }\n        // if on start no opacity, opacity may be exist on end\n        if (hasBreak === false && arr[0] > 1) {\n            min = 0\n            max = arr[0]\n            // opaciy at start\n        } else if (hasBreak === false) {\n            min = arr[arr.length - 1] || 0\n            max = null\n        }\n        return {min, max}\n    },\n    /**\n     * @param domtoimageOptions\n     * @returns {Promise<Uint8Array>}\n     * @private\n     */\n    _getPixelData ({domtoimageOptions = {}}) {\n        /**\n         * 1) we try try to get full map size screen, but we have problem of big canvas:\n         * https://stackoverflow.com/questions/6081483/maximum-size-of-a-canvas-element\n         * ie mobile - 4000\n         * ie - 8000\n         * chrome - 16000\n         * firefox - 32000\n         *\n         * 2) on error, we can create screen with hide not visible elements by css\n         * sometimes it not work, need solution\n         */\n        return this._getPixelDataOfNormalMap(domtoimageOptions).catch(e => {\n            console.warn('May be map size very big on that zoom level, we have error:', e.toString())\n            console.warn('You can manually hide map elements with large distances between them for fix that warn')\n            return this._getPixelDataOfBigMap(domtoimageOptions)\n        })\n    },\n    _getPixelDataOfNormalMap (domtoimageOptions = {}) {\n        const node = this._map.getContainer()\n\n        this._node = {\n            node,\n            screenHeight: node.scrollHeight,\n            screenWidth: node.scrollWidth\n        }\n\n        return domtoimage.toPixelData(node, domtoimageOptions)\n    },\n    _getPixelDataOfBigMap (domtoimageOptions = {}) {\n        const node = this._map.getContainer()\n\n        // fix: https://github.com/grinat/leaflet-simple-map-screenshoter/issues/7\n        // fix memory out error if map scrollHeight and scrollWidth very big\n        const mapPane = this._map.getPane('mapPane')\n\n        const increaser = 2 // <-- when window resize, map resize with translate option, we need what for prevent gray on borders\n        mapPane.style.width = `${node.clientWidth * increaser}px`\n        mapPane.style.height = `${node.clientHeight * increaser}px`\n        mapPane.style.overflow = 'hidden'\n\n        const restoreMapPane = () => {\n            mapPane.style.width = 'initial'\n            mapPane.style.height = 'initial'\n            mapPane.style.overflow = 'initial'\n        }\n\n        this._node = {\n            node,\n            screenHeight: node.scrollHeight,\n            screenWidth: node.scrollWidth\n        }\n\n        return domtoimage.toPixelData(node, domtoimageOptions).then(r => {\n            restoreMapPane()\n            return r\n        }).catch(e => {\n            restoreMapPane()\n\n            // 4000 - max canvas size on ie mobile\n            if (node.scrollHeight >= 4000 || node.scrollWidth >= 4000) {\n                return this.options.onPixelDataFail({\n                    plugin: this,\n                    node,\n                    mapPane,\n                    error: e,\n                    domtoimageOptions\n                })\n            }\n\n            return Promise.reject(e)\n        })\n    },\n    /**\n     * @private\n     */\n    _addScreenBtn () {\n        this._link = L.DomUtil.create(\n            'a',\n            'leaflet-control-simpleMapScreenshoter-btn',\n            this._container\n        )\n        this._addCss()\n        L.DomEvent.addListener(this._link, 'click', this._onScreenBtn, this)\n        L.DomEvent.disableClickPropagation(this._link)\n    },\n    /**\n     * @private\n     */\n    _addCss () {\n        let css = `\n    .leaflet-control-simpleMapScreenshoter{\n       border: 2px solid rgba(0,0,0,0.2);\n       background-clip: padding-box;\n    }\n    .leaflet-control-simpleMapScreenshoter a{\n       background-color: #fff;\n       border-bottom: 1px solid #ccc;\n       width: 30px;\n       height: 30px;\n       line-height: 30px;\n       display: block;\n       text-align: center;\n       text-decoration: none;\n       color: black;\n       overflow: hidden;\n       border-radius: 2px;\n       background-image: url('${this.options.iconUrl}');\n       background-position: 46% 41%;\n       background-repeat: no-repeat;\n       background-size: 63%;\n    }\n    .leaflet-control-simpleMapScreenshoter a:hover{\n       cursor: pointer;\n    }\n    `\n        let head = document.head || document.getElementsByTagName('head')[0]\n        let style = document.createElement('style')\n        style.appendChild(\n            document.createTextNode(\n                css\n            )\n        )\n        head.appendChild(style)\n    },\n    /**\n     * @private\n     */\n    _onScreenBtn () {\n        this._map.fire('simpleMapScreenshoter.click')\n        if (this.options.preventDownload) return\n\n        this.takeScreen().then(blob => {\n            const screenName = typeof this.options.screenName === 'function'\n                ? this.options.screenName.call(this)\n                : this.options.screenName\n\n            fileSaver.saveAs(blob, `${screenName}.png`)\n        }).catch(e => {\n            this._map.fire('simpleMapScreenshoter.error', {e})\n        })\n    },\n    _onUserStartInteractWithMap () {\n        this._interaction = true\n    },\n    _onUserEndInteractWithMap () {\n        this._interaction = false\n    },\n    _waitEndOfInteractions () {\n        return new Promise(resolve => {\n            const interval = setInterval(() => {\n                if (!this._interaction) {\n                    resolve()\n                    clearInterval(interval)\n                }\n            }, 100)\n        })\n    }\n})\n\nexport default SimpleMapScreenshoter\n","/* global L */\nimport SimpleMapScreenshoter from './SimpleMapScreenshoter'\n\n/**\n * @returns {L.Control.SimpleMapScreenshoter}\n */\nconst init = () => {\n    L.Control.SimpleMapScreenshoter = SimpleMapScreenshoter\n    L.simpleMapScreenshoter = function (options) {\n        return new L.Control.SimpleMapScreenshoter(options)\n    }\n    return SimpleMapScreenshoter\n}\n\nexport default init()\n\nexport {SimpleMapScreenshoter}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}